<div class="bg-white dark:bg-dark-bg-secondary rounded-lg shadow p-6">
  <%= form_with(model: subscription, local: true) do |form| %>
    <% if subscription&.errors&.any? %>
      <div class="bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-200 px-4 py-3 rounded mb-4">
        <h2 class="text-lg font-medium"><%= pluralize(subscription.errors.count, "erro") %> impediram que esta assinatura fosse salva:</h2>
        <ul class="list-disc pl-5 mt-2">
          <% subscription.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-4">
      <%= form.label :customer_id, "Cliente", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.collection_select :customer_id, Customer.all, :id, :name, { prompt: "Selecione um cliente" }, class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 bg-white dark:bg-dark-bg-tertiary text-gray-900 dark:text-gray-100" %>
    </div>

    <div class="mb-4">
      <%= form.label :service_package_id, "Pacote de Serviço", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.collection_select :service_package_id, ServicePackage.all, :id, :name, { prompt: "Selecione um pacote" }, class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 bg-white dark:bg-dark-bg-tertiary text-gray-900 dark:text-gray-100" %>
    </div>

    <div class="mb-4">
      <%= form.label :start_date, "Data de Início", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.date_field :start_date, class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 bg-white dark:bg-dark-bg-tertiary text-gray-900 dark:text-gray-100" %>
    </div>

    <div class="mb-4">
      <%= form.label :end_date, "Data de Término (opcional)", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.date_field :end_date, class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 bg-white dark:bg-dark-bg-tertiary text-gray-900 dark:text-gray-100" %>
    </div>

    <div class="mb-4">
      <%= form.label :status, "Status", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.select :status, [['Ativo', 'active'], ['Inativo', 'inactive']], { prompt: "Selecione um status" }, class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 bg-white dark:bg-dark-bg-tertiary text-gray-900 dark:text-gray-100" %>
    </div>

    <div class="mb-4">
      <%= form.label :billing_day, "Dia de Cobrança", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.number_field :billing_day, min: 1, max: 31, class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 bg-white dark:bg-dark-bg-tertiary text-gray-900 dark:text-gray-100" %>
    </div>

    <div class="mb-4">
      <%= form.label :notes, "Observações", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.text_area :notes, rows: 3, class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 bg-white dark:bg-dark-bg-tertiary text-gray-900 dark:text-gray-100" %>
    </div>

    <div class="flex justify-end mt-6">
      <%= link_to "Cancelar", subscriptions_path, class: "mr-2 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-bg-tertiary hover:bg-gray-50 dark:hover:bg-dark-bg-primary" %>
      <%= form.submit "Salvar", class: "px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md dark:bg-indigo-700 dark:hover:bg-indigo-800" %>
    </div>
  <% end %>
</div>